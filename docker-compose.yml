services:
  casatunes-ui:
    # To build locally instead of pulling the published image, uncomment the build
    # section below and optionally adjust build args. By default we're pulling
    # the pre-built image from Docker Hub (mmockus/mycasa:latest).
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # Provide ONLY protocol+host (no port). Pulled from root .env or shell env with fallback.
        REACT_APP_API_BASE: ${REACT_APP_API_BASE:-http://casaserver.local}
        # Optional CasaTunes API port (defaults to 8735 if unset)
        REACT_APP_API_PORT: ${REACT_APP_API_PORT:-8735}
    # image: mmockus/mycasa:latest
    # image: casatunes-ui:latest
    ports:
      - "${DOCKER_APP_PORT:-8080}:80"
    restart: unless-stopped
    # Load variables for runtime container environment (not needed just for build arg substitution)
    env_file:
      - .env
